<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplos - Tasa de Cambio BCC</title>
</head>
<body>
    <h1>Ejemplos de Uso - Plugin Tasa de Cambio BCC</h1>

    <!-- =====================================================
         EJEMPLO 1: Banner Superior (Header)
         ===================================================== -->
    <section>
        <h2>1. Banner Superior para Header</h2>
        <p>Copia este código en tu <code>header.php</code> o donde quieras mostrar el banner:</p>

        <pre><code>&lt;?php
// Banner con monedas principales
if (shortcode_exists('tasa_cambio_banner')) {
    echo do_shortcode('[tasa_cambio_banner]');
}
?&gt;</code></pre>

        <h3>Con parámetros personalizados:</h3>
        <pre><code>&lt;?php
// Mostrar solo USD, EUR, CAD, RUB en Segmento III
echo do_shortcode('[tasa_cambio_banner segmento="tasaEspecial" monedas="USD,EUR,CAD,RUB"]');

// Mostrar USD, EUR, GBP, JPY en Segmento I
echo do_shortcode('[tasa_cambio_banner segmento="tasaOficial" monedas="USD,EUR,GBP,JPY"]');
?&gt;</code></pre>
    </section>

    <!-- =====================================================
         EJEMPLO 2: Vista Completa con Tabs
         ===================================================== -->
    <section>
        <h2>2. Vista Completa con Tabs (Todas las Monedas)</h2>
        <p>Para mostrar la vista completa con los 3 segmentos en una página:</p>

        <pre><code>&lt;?php
// Vista completa con todos los segmentos
if (shortcode_exists('tasa_cambio_completo')) {
    echo do_shortcode('[tasa_cambio_completo]');
}
?&gt;</code></pre>

        <h3>Iniciar en un segmento específico:</h3>
        <pre><code>&lt;?php
// Iniciar mostrando Segmento II (Pública)
echo do_shortcode('[tasa_cambio_completo segmento_inicial="tasaPublica"]');

// Iniciar mostrando Segmento I (Oficial)
echo do_shortcode('[tasa_cambio_completo segmento_inicial="tasaOficial"]');
?&gt;</code></pre>

        <h3>En el editor de WordPress (Gutenberg o Clásico):</h3>
        <p>Simplemente pega el shortcode en un bloque de shortcode o en el editor:</p>
        <pre><code>[tasa_cambio_completo]</code></pre>
    </section>

    <!-- =====================================================
         EJEMPLO 3: Widget en Sidebar
         ===================================================== -->
    <section>
        <h2>3. Widget en Sidebar</h2>

        <h3>Método 1: Desde el Administrador</h3>
        <ol>
            <li>Ve a <strong>Apariencia > Widgets</strong></li>
            <li>Busca "Tasas de Cambio BCC"</li>
            <li>Arrástralo al sidebar deseado</li>
            <li>Configura:
                <ul>
                    <li>Segmento por defecto</li>
                    <li>Monedas a mostrar</li>
                </ul>
            </li>
            <li>Guarda los cambios</li>
        </ol>

        <h3>Método 2: Programáticamente en sidebar.php</h3>
        <pre><code>&lt;?php
// Agregar widget manualmente
if (class_exists('Tasa_Cambio_BCC_Widget')) {
    the_widget('Tasa_Cambio_BCC_Widget', array(
        'segmento_defecto' => 'tasaEspecial',
        'monedas' => array('USD', 'EUR', 'CAD', 'RUB', 'MXN', 'CNY', 'GBP', 'JPY')
    ));
}
?&gt;</code></pre>
    </section>

    <!-- =====================================================
         EJEMPLO 4: Integración en Página Personalizada
         ===================================================== -->
    <section>
        <h2>4. Página Completa de Tasas de Cambio</h2>
        <p>Crea una plantilla personalizada para una página dedicada a tasas:</p>

        <pre><code>&lt;?php
/*
Template Name: Tasas de Cambio
*/

get_header();
?&gt;

&lt;div class="tasas-cambio-page"&gt;
    &lt;div class="container"&gt;
        &lt;h1&gt;Tasas de Cambio del Banco Central de Cuba&lt;/h1&gt;

        &lt;!-- Banner superior --&gt;
        &lt;?php echo do_shortcode('[tasa_cambio_banner]'); ?&gt;

        &lt;!-- Espacio --&gt;
        &lt;div style="margin: 40px 0;"&gt;&lt;/div&gt;

        &lt;!-- Vista completa con tabs --&gt;
        &lt;?php echo do_shortcode('[tasa_cambio_completo]'); ?&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;?php
get_footer();
?&gt;</code></pre>
    </section>

    <!-- =====================================================
         EJEMPLO 5: Estilos Personalizados
         ===================================================== -->
    <section>
        <h2>5. Personalizar Estilos</h2>
        <p>Agrega estilos personalizados en tu tema (style.css o en Personalizador):</p>

        <pre><code>/* Cambiar color principal */
.tasa-cambio-bcc-widget,
.tasa-cambio-banner,
.tasa-cambio-completo {
    /* Tu color personalizado */
}

/* Cambiar color del logo BCC */
.bcc-logo,
.bcc-logo-grande {
    background: #ff6b6b !important; /* Rojo personalizado */
}

/* Cambiar tamaño de fuente en banner */
.tasa-banner-numero {
    font-size: 22px !important;
}

/* Ocultar variación en móvil */
@media (max-width: 480px) {
    .tasa-variacion {
        display: none;
    }
}</code></pre>
    </section>

    <!-- =====================================================
         EJEMPLO 6: JavaScript Personalizado
         ===================================================== -->
    <section>
        <h2>6. Funciones JavaScript</h2>
        <p>Accede a las funciones del plugin desde tu JavaScript:</p>

        <pre><code>&lt;script&gt;
jQuery(document).ready(function($) {

    // Forzar actualización de tasas
    TasaCambioBCC.actualizarTasas();

    // Formatear un número
    var valorFormateado = TasaCambioBCC.formatearNumero(417.50);
    console.log(valorFormateado); // "417,50"

    // Cambiar segmento programáticamente
    var $container = $('.tasa-cambio-completo');
    TasaCambioBCC.actualizarValoresSegmento($container, 'tasaOficial');

});
&lt;/script&gt;</code></pre>
    </section>

    <!-- =====================================================
         EJEMPLO 7: Limpiar Cache
         ===================================================== -->
    <section>
        <h2>7. Limpiar Cache Manualmente</h2>
        <p>Si necesitas forzar la actualización de datos:</p>

        <pre><code>&lt;?php
// En functions.php o en un plugin personalizado

// Limpiar cache al guardar una entrada
add_action('save_post', 'limpiar_cache_tasas');
function limpiar_cache_tasas() {
    delete_transient('tasa_cambio_bcc_cache');
}

// Limpiar cache programáticamente
if (class_exists('Tasa_Cambio_BCC_API_Client')) {
    $api_client = new Tasa_Cambio_BCC_API_Client();
    $api_client->limpiar_cache();
}

// Agregar botón en admin para limpiar cache
add_action('admin_bar_menu', 'agregar_boton_limpiar_cache', 999);
function agregar_boton_limpiar_cache($wp_admin_bar) {
    if (!current_user_can('manage_options')) return;

    $wp_admin_bar->add_node(array(
        'id'    => 'limpiar-cache-tasas',
        'title' => 'Limpiar Cache Tasas',
        'href'  => admin_url('admin-ajax.php?action=limpiar_cache_tasas')
    ));
}

add_action('wp_ajax_limpiar_cache_tasas', 'ajax_limpiar_cache_tasas');
function ajax_limpiar_cache_tasas() {
    delete_transient('tasa_cambio_bcc_cache');
    wp_redirect(wp_get_referer());
    exit;
}
?&gt;</code></pre>
    </section>

    <!-- =====================================================
         EJEMPLO 8: Conditional Display
         ===================================================== -->
    <section>
        <h2>8. Mostrar Solo en Ciertas Páginas</h2>

        <pre><code>&lt;?php
// Solo en la página de inicio
if (is_front_page()) {
    echo do_shortcode('[tasa_cambio_banner]');
}

// Solo en páginas específicas
if (is_page(array('tasas-cambio', 'finanzas', 'economia'))) {
    echo do_shortcode('[tasa_cambio_completo]');
}

// En todas las páginas excepto el blog
if (!is_home() && !is_single()) {
    echo do_shortcode('[tasa_cambio_banner]');
}

// Solo para usuarios logueados
if (is_user_logged_in()) {
    echo do_shortcode('[tasa_cambio_completo]');
}
?&gt;</code></pre>
    </section>

    <!-- =====================================================
         EJEMPLO 9: Elementor/Page Builders
         ===================================================== -->
    <section>
        <h2>9. Uso en Page Builders (Elementor, WPBakery, etc.)</h2>

        <h3>Elementor:</h3>
        <ol>
            <li>Agrega un widget de <strong>Shortcode</strong></li>
            <li>Pega el shortcode: <code>[tasa_cambio_banner]</code> o <code>[tasa_cambio_completo]</code></li>
        </ol>

        <h3>WPBakery:</h3>
        <ol>
            <li>Agrega elemento <strong>Raw HTML</strong> o <strong>Shortcode</strong></li>
            <li>Inserta: <code>[tasa_cambio_completo]</code></li>
        </ol>

        <h3>Divi:</h3>
        <ol>
            <li>Agrega módulo de <strong>Código</strong></li>
            <li>Pega el shortcode</li>
        </ol>
    </section>

    <!-- =====================================================
         EJEMPLO 10: Hooks y Filtros
         ===================================================== -->
    <section>
        <h2>10. Hooks y Filtros Personalizados</h2>

        <pre><code>&lt;?php
// Agregar banner automáticamente después del header
add_action('wp_body_open', 'agregar_banner_tasas_automatico');
function agregar_banner_tasas_automatico() {
    if (is_front_page()) {
        echo do_shortcode('[tasa_cambio_banner]');
    }
}

// Agregar widget automáticamente a todos los sidebars
add_action('widgets_init', 'agregar_widget_tasas_automatico');
function agregar_widget_tasas_automatico() {
    if (is_active_sidebar('sidebar-1')) {
        dynamic_sidebar('sidebar-1');
    }
}

// Modificar duración del cache (en functions.php)
add_filter('tasa_cambio_cache_duration', 'modificar_duracion_cache');
function modificar_duracion_cache($duration) {
    return 7200; // 2 horas en segundos
}
?&gt;</code></pre>
    </section>

    <hr>
    <p><strong>Nota:</strong> Recuerda reemplazar "Tu Nombre" en el archivo principal del plugin con tu información real.</p>

    <footer>
        <p>Plugin Tasa de Cambio BCC - Versión 1.0.0</p>
        <p>Desarrollado para WordPress - Enero 2026</p>
    </footer>
</body>
</html>
